
\begin{tikzpicture}
\newcommand{\addplotCatDB}[6]{
	   \addplot[xshift=#1,draw=black,line width=0.15pt, fill=tugb, discard if singlecatdb={#2}{#3}{#4},postaction={#5}] 
	   table[ y=llm_pipe_gen_time, col sep=comma, x=dataset] {results/Experiment_CatDB_Micro_Benchmark2.csv};
	   \label{leg_pip_gen_#4}

     \addplot[xshift=#6,draw=black,line width=0.15pt, fill=tug, discard if singlecatdb={#2}{#3}{#4},postaction={#5}] 
	   table[ y=llm_pipe_run_time, col sep=comma, x=dataset] {results/Experiment_CatDB_Micro_Benchmark2.csv};
	   \label{leg_pip_runtime_#4}       
};

\newcommand{\addplotDataProfillingaa}[2]{
	   \addplot[xshift=#1, draw=black,line width=0.15pt, fill=black, discard if singlecatdb={gpt-4}{#2}{SCHEMA}] 
	   table[ y=data_profile_time, col sep=comma, x=dataset] {results/Experiment_CatDB_Micro_Benchmark.dat};
     \label{leg_dataprofile} 
};

\newcommand{\addplotDataProfilling}[2]{
	   \addplot[ draw=black,line width=0.15pt, fill=black] 
	   table[ y=time-sec, col sep=comma, x=dataset] {results/Experiment1_Data_Profile.csv};
     \label{leg_dataprofile} 
};

\pgfplotsset{
    discard if singlecatdb/.style n args={3}{
        x filter/.code={
            \edef\tempa{\thisrow{llm_model}}
            \edef\tempb{#1}
            \ifx\tempa\tempb
                    \edef\tempc{\thisrow{task_type}}
                    \edef\tempd{#2}
                    \ifx\tempc\tempd
                      \edef\tempe{\thisrow{prompt_representation_type}}
                      \edef\tempf{#3}
                      \ifx\tempe\tempf                        	
                      \else
                      \def\pgfmathresult{inf}
                      \fi
                    \else
                    \def\pgfmathresult{inf}
                    \fi      
            \else
            \def\pgfmathresult{inf}
            \fi			
        }
    },
    discard if profile/.style n args={1}{
      x filter/.code={
          \edef\tempa{\thisrow{task_type}}
          \edef\tempb{#1}
          \ifx\tempa\tempb
          \else
          \def\pgfmathresult{inf}
          \fi			
      }
  },
};

\begin{axis}[
  %ymode=log,  
  %every axis/.style={
    ybar stacked,
    %ymode=log,
    every major tick/.append style={ thick,major tick length=2.5pt, gray},
    axis line style={gray},
    ybar,        
    ybar=0pt,
    ymin=0,
    major x tick style = transparent,
    bar shift=0pt,
    %ymax=10000,
    %%log ticks with fixed point,
    %%y tick label style={/pgf/number format/1000 sep={}},
    %%x tick label style={/pgf/number format/1000 sep={}},
    scaled y ticks=false,
    % major x tick style = transparent,
    %enlarge y limits={0.013,upper},
    %%enlarge x limits=0.1,
    ylabel={Execution Time[s]},
    %xlabel={$\#$Dataset},
    %%ytick={0.0001,100,1000, 10000},
    %%yticklabels={0,1e2, 1e3,1e4},
    ytick align=outside,
    %xtick pos=left,
    %ytick pos=left,
    %yticklabel style = {font=\Large},
    %ylabel style = {font=\Large, yshift=-2pt},
    %xticklabel style = {font=\normalsize, xshift=0pt},
    %height=0.7\columnwidth,
    width=1.3\columnwidth,    
    bar width=8pt,	 
    ymajorgrids=true,
    grid style=dotted,   
    minor grid style={gray!50}, 
    xtick = data,
    xticklabel=\empty,
    symbolic x coords={Airlines,Microsoft,KDD98,Zurich Transport,Aiabetes,Credit g,NYC,Black Friday,Higgs,CMC,Buzzinsocialmedia,Federal Election, Pokerhand,Sudoku Puzzles,Simulated Electricity}, 
    xtickmin=Airlines,
    xtickmax=Simulated Electricity,
    xticklabel style={rotate=90},
    enlarge x limits=.3,     
    enlarge x limits=0.25,
    point meta=explicit symbolic,
    % 
    %%nodes near coords,
    %point meta=explicit symbolic,    
    %xticklabels={Simulated Electricity,Higgs,KDD98,Airlines,Credit g},   
    % xticklabels={simulated\_electricity,Higgs,KDD98,airlines,BNG\_credit\_g,Microsoft,cmc,diabetes,3-million-Sudoku-puzzles-with-ratings,pokerhand,Buzzinsocialmedia\_Twitter,delays\_zurich\_transport,nyc-taxi-green-dec-2016,black\_friday,federal\_election},   
    %%legend image code/.code={\draw [#1] (0cm,-0.1cm) rectangle (0.3cm,0.2cm); }, 
    %}
]
	
%\begin{axis}%[hide axis]
  \addplotDataProfillingaa{0pt}{binary};	  	  
%\end{axis}

% \begin{axis}[hide axis]  
%   \addplotCatDB{-4}{gpt-4}{binary}{SCHEMA}{}{-12};
% \end{axis}

% \begin{axis}[hide axis]  
% 	\addplotCatDB{4}{gpt-4}{binary}{SCHEMA_STATISTIC}{pattern=north east lines,pattern color=gray!130}{-4};
% \end{axis}

	
% \node [draw=none,inner sep=0, font=\Large, anchor=west] (leg1) at (rel axis cs: 0.45,0.3) {\shortstack[l]{
% 			\ref{leg_dataprofile} Data Profiling \\
%       \ref{leg_pip_gen_SCHEMA} Pipeline Generation  \\
% 			\ref{leg_pip_runtime_SCHEMA} Pipeline Execution 			 			
% 	}};

%  \node [draw=none,inner sep=0, font=\large, anchor=west] (schema) at (3.9,2.30) {Schema};
%  \draw[draw=black] ($(schema.west)+(-0.4cm,.15cm)$) rectangle ($(schema.west)+(-0.1cm,-0.15cm)$); 


%  \node [draw=none,inner sep=0, font=\large, anchor=west, right=of schema] (schema_statistic)  {Schema \& Statistics};
%  \draw[draw=black, pattern=north east lines, pattern color=gray!130] ($(schema_statistic.west)+(-0.4cm,.15cm)$) rectangle ($(schema_statistic.west)+(-0.1cm,-0.15cm)$); 
\end{axis}
\end{tikzpicture}
