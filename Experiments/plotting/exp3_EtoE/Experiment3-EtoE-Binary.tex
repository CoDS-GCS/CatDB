\newcommand{\addplotEtoE}[9]{
	   \addplot[xshift=#6pt,draw=black,line width=0.15pt, fill=#7, discard if singlplatform={#1}{#2}{#3}{#4},postaction={#5}, opacity=1] 
	   table[ y=#9, col sep=comma, x=dataset_name] {results/Experiment3_EtoE.dat};
	   \label{plat_#1#2#3#4_Train};

    %  \addplot[xshift=#8pt,draw=#7,line width=0.15pt, fill=black, discard if singlplatform={#1}{#2}{#3}{#4},postaction={}, opacity=1, bar width=5pt] 
	  %  table[ y=test_accuracy, col sep=comma, x=dataset_name] {results/Experiment3_EtoE.dat};
	  %  \label{plat_#1#2#3#4_Test};
};


\pgfplotsset{
    discard if singlplatform/.style n args={4}{
        x filter/.code={
            \edef\tempa{\thisrow{config}}
            \edef\tempb{#1}
            \ifx\tempa\tempb
              \edef\tempc{\thisrow{has_description}}
                \edef\tempd{#2}
                  \ifx\tempc\tempd
                  %
                  \edef\tempe{\thisrow{classifier}}
                  \edef\tempf{#3}
                    \ifx\tempe\tempf
                    %
                    \edef\tempg{\thisrow{task_type}}
                    \edef\temph{#4}
                      \ifx\tempg\temph                      
                      \else
                      \def\pgfmathresult{inf}
                      \fi    
                    %
                    \else
                    \def\pgfmathresult{inf}
                    \fi    
                  %
                  \else
                  \def\pgfmathresult{inf}
                  \fi
            \else
            \def\pgfmathresult{inf}
            \fi			
        }
    },
    every non boxed x axis/.style={}
};


\begin{tikzpicture}[
  every axis/.style={
    major x tick style = {draw=none},
    xtick style={draw=none},		
    every major tick/.append style={ line width=0.10mm, major tick length=2pt, gray},
    axis line style={gray},
    ybar,        
    ybar=0pt,
    ymin=0,
    ymax=1,
    log ticks with fixed point,
    y tick label style={/pgf/number format/1000 sep={}},
    x tick label style={/pgf/number format/1000 sep={}},
    scaled y ticks=false,
    enlarge y limits={0.3,upper},
    enlarge x limits=0.08,
    ylabel={Accuracy ($\%$)},
    ytick={0,.2,.4,.6,.8,1},
    yticklabels={0,20,40,60,80,100},
    ytick align=outside,
    xtick align=outside,
    xtick pos=left,
    ytick pos=left,
    yticklabel style = {font=\scriptsize},
    ylabel style = {font=\scriptsize, yshift=-5pt},
    xticklabel style = {font=\scriptsize, rotate=0, xshift=0pt,yshift=0pt},
    height=0.45\columnwidth,
    width=\textwidth,    
    bar width=3pt,	 
    ymajorgrids=true,
    grid style=dotted,   
    minor grid style={gray!50}, 
    xtick = data,
    symbolic x coords={Higgs,Albert,Click-Prediction,Census,Heart-Statlog,Breast-w,Credit-g,Diabetes,Tic-Tac-Toe,PC1,Airlines,CMC,Eucalyptus,Balance-Scale,Jungle-Chess,KDDCup99,Road-Safety,Drug-Directory,Okcupid-Stem,Walking-Activity,PASS,Aloi,MD-MIX-Mini,Dionis,Meta-Album-BRD}, 
    legend image code/.code={\draw [#1] (0cm,-0.1cm) rectangle (0.2cm,0.15cm); },
  }	 
]

\begin{axis} %[hide axis]
  \addplotEtoE{CatDB}{no}{automatic}{binary}{}{0}{tugb}{0}{train_accuracy};	
 
  
  \addplotEtoE{CatDB}{yes}{automatic}{binary}{pattern=north east lines, pattern color=gray!200}{0}{tugb}{0}{train_accuracy};	
 
  \addplotEtoE{CatDB}{no}{automatic}{binary}{pattern=horizontal lines, pattern color=gray!200}{0}{tugb}{0}{test_accuracy};	
  
  \addplotEtoE{CatDB}{yes}{automatic}{binary}{pattern=north west lines, pattern color=gray!200}{0}{tugb}{0}{test_accuracy};	
  

   \addplotEtoE{CAAFE}{no}{TabPFN}{binary}{}{0}{color4}{0}{train_accuracy};	
   \addplotEtoE{CAAFE}{yes}{TabPFN}{binary}{pattern=north east lines, pattern color=gray!120}{0}{color4}{0}{train_accuracy};
   \addplotEtoE{CAAFE}{no}{TabPFN}{binary}{pattern=horizontal lines, pattern color=gray!120}{0}{color4}{0}{test_accuracy};
   \addplotEtoE{CAAFE}{yes}{TabPFN}{binary}{pattern=north west lines, pattern color=gray!120}{0}{color4}{0}{test_accuracy};
  
\end{axis}

% \begin{axis}[hide axis] 
%   \addplotEtoE{CatDB}{yes}{automatic}{binary}{pattern=north east lines, pattern color=gray!120}{5.5}{tugb}{1.5};	
% \end{axis}

% \begin{axis}[hide axis] 
%   \addplotEtoE{CAAFE}{no}{TabPFN}{binary}{}{11}{color4}{7};	
% \end{axis}

% \begin{axis}%[hide axis] 
%   \addplotEtoE{CAAFE}{yes}{TabPFN}{binary}{pattern=north east lines, pattern color=gray!120}{16.5}{color4}{12.5};	
% \end{axis}

% \begin{axis}[hide axis] 
%   \addplotEtoE{CAAFE}{no}{RandomForest}{binary}{}{22}{color7}{18};	
% \end{axis}

% \begin{axis} %[hide axis]
%   %\addplotEtoE{CatDB}{no}{automatic}{binary}{}{0pt}{tug}{black};
%   \addplotEtoE{CatDB}{yes}{automatic}{binary}{pattern=north east lines}{3.5pt}{tug}{black}{1.5};


%   % \addplotEtoE{CatDB}{no}{automatic}{binary}{test_accuracy}{pattern=north east lines}{0pt}{Test}{tug};
%   % \addplotEtoE{CatDB}{yes}{automatic}{binary}{train_accuracy}{}{0pt}{Train}{tugb};
%   % \addplotEtoE{CatDB}{yes}{automatic}{binary}{test_accuracy}{pattern=north east lines}{0pt}{Test}{tugb};
%   % %
%   % \addplotEtoE{CAAFE}{no}{TabPFN}{binary}{train_accuracy}{}{0pt}{Train}{color4};
%   % \addplotEtoE{CAAFE}{no}{TabPFN}{binary}{test_accuracy}{pattern=north east lines}{0pt}{Test}{color4};
%   % \addplotEtoE{CAAFE}{yes}{TabPFN}{binary}{train_accuracy}{}{0pt}{Train}{color6};
%   % \addplotEtoE{CAAFE}{yes}{TabPFN}{binary}{test_accuracy}{pattern=north east lines}{0pt}{Test}{color6};
  	  	  
% \end{axis}

% \node [draw=none,inner sep=0, font=\scriptsize, anchor=west] (leg1) at (rel axis cs: 0.75,0.73) {\shortstack[l]{
% 			\ref{string} String \\ 
%       \ref{int} Int \\
%       \ref{float} Float \\
%       \ref{bool} Bool		 			
% 	}};

\end{tikzpicture}
